[gd_scene load_steps=25 format=3 uid="uid://dwjmpt5fbaak2"]

[ext_resource type="Script" path="res://level0.cs" id="1_ux354"]
[ext_resource type="PackedScene" uid="uid://cl6bjmy17mjve" path="res://bg_music.tscn" id="4_c2ts5"]
[ext_resource type="Script" path="res://LampPost.cs" id="7_ph10c"]
[ext_resource type="Script" path="res://Camera2.cs" id="8_7fw5a"]
[ext_resource type="PackedScene" uid="uid://bvvscrhuoifvh" path="res://lamp_post_2.tscn" id="8_87jf0"]
[ext_resource type="PackedScene" uid="uid://mpnfn272l8i6" path="res://moving_platform_3.tscn" id="8_t3ins"]
[ext_resource type="Script" path="res://Player.cs" id="9_gqrv1"]
[ext_resource type="Script" path="res://CollideableObject.cs" id="10_2tvtr"]
[ext_resource type="Script" path="res://Talker.cs" id="10_mxve8"]
[ext_resource type="Script" path="res://HUDManager.cs" id="11_jp8nh"]
[ext_resource type="Shape3D" uid="uid://fq5v2apmp1qq" path="res://assets/shape_floor.tres" id="12_knnwi"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_lwqku"]
sky_top_color = Color(0.541176, 0.423529, 0.290196, 1)
sky_horizon_color = Color(0.676471, 0.65, 0.614706, 1)
sky_energy_multiplier = 1.5
ground_bottom_color = Color(0.164706, 0.176471, 0.168627, 1)
ground_horizon_color = Color(0.676471, 0.65, 0.614706, 1)

[sub_resource type="Sky" id="Sky_esjiq"]
sky_material = SubResource("ProceduralSkyMaterial_lwqku")

[sub_resource type="Environment" id="Environment_mck8e"]
background_mode = 2
sky = SubResource("Sky_esjiq")
ambient_light_source = 1
tonemap_mode = 2

[sub_resource type="CapsuleMesh" id="CapsuleMesh_tlm4b"]

[sub_resource type="SphereShape3D" id="SphereShape3D_s0opn"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_o2kcn"]
radius = 0.497713
height = 2.01993

[sub_resource type="TorusMesh" id="TorusMesh_cl3xm"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_jdkl7"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_t4q33"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4jcw5"]

[sub_resource type="MeshTexture" id="MeshTexture_50fex"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mcwpa"]
blend_mode = 2
metallic = 1.0
metallic_texture = SubResource("MeshTexture_50fex")
roughness = 0.77
refraction_enabled = true
refraction_texture_channel = 4

[sub_resource type="PlaneMesh" id="PlaneMesh_q726u"]
material = SubResource("StandardMaterial3D_mcwpa")
size = Vector2(50, 50)

[node name="Wod" type="Node3D"]
script = ExtResource("1_ux354")

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 1920.0
offset_bottom = 1080.0
mouse_filter = 2
script = ExtResource("11_jp8nh")

[node name="EventLog" type="ScrollContainer" parent="HUD"]
layout_mode = 0
offset_left = 33.0
offset_top = 756.0
offset_right = 1881.0
offset_bottom = 1006.0

[node name="Label" type="Label" parent="HUD/EventLog"]
custom_minimum_size = Vector2(600, 50)
layout_direction = 1
layout_mode = 2
autowrap_mode = 2

[node name="DialoguePanel" type="PanelContainer" parent="HUD"]
layout_mode = 0
offset_left = 435.0
offset_top = 424.0
offset_right = 1116.0
offset_bottom = 548.0

[node name="MessageLabel" type="RichTextLabel" parent="HUD/DialoguePanel"]
custom_minimum_size = Vector2(16, 32)
layout_direction = 2
layout_mode = 2

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_mck8e")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.707602, 0.287481, -0.645488, 0.244313, 0.757621, 0.605245, 0.663032, -0.585974, 0.465858, -3.27003, 36.1152, 10.5027)
light_color = Color(0.796172, 0.801828, 0.649819, 1)
light_energy = 0.92
light_indirect_energy = 0.16
light_angular_distance = 4.05
shadow_enabled = true
shadow_bias = 0.0
shadow_normal_bias = 1.0
shadow_opacity = 0.85
shadow_blur = 0.5
directional_shadow_fade_start = 0.74
directional_shadow_pancake_size = 17.4
sky_mode = 1

[node name="AudioStreamPlayer" parent="." instance=ExtResource("4_c2ts5")]
volume_db = -38.826

[node name="LampPost2" parent="." instance=ExtResource("8_87jf0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.218, 0, -11.578)
script = ExtResource("7_ph10c")

[node name="MovingPlatform3" parent="." instance=ExtResource("8_t3ins")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.63511, 1.83672, 0)

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.63093, 0)
script = ExtResource("9_gqrv1")

[node name="PlayerMesh" type="MeshInstance3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
mesh = SubResource("CapsuleMesh_tlm4b")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="Player"]

[node name="CollisionZone0" type="Area3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("10_2tvtr")
metadata/objtype = ""

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/CollisionZone0"]
transform = Transform3D(2.5, 0, 0, 0, 2.5, 0, 0, 0, 2.5, 0, 1, 0)
shape = SubResource("SphereShape3D_s0opn")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.99445, 0)
shape = SubResource("CapsuleShape3D_o2kcn")

[node name="Clerk" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.49013, 0.763058, 4.73254)
script = ExtResource("10_mxve8")

[node name="StaticBody3D" type="StaticBody3D" parent="Clerk"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Clerk/StaticBody3D"]
mesh = SubResource("TorusMesh_cl3xm")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Clerk/StaticBody3D"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
shape = SubResource("CapsuleShape3D_jdkl7")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("HUD")]
transform = Transform3D(1, 0, 0, 0, 0.928738, 0.370736, 0, -0.370736, 0.928738, 0, 3.59515, 6.50117)
current = true
script = ExtResource("8_7fw5a")
HUD = NodePath("../HUD")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = ExtResource("12_knnwi")

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D/CollisionShape3D"]
material_override = SubResource("StandardMaterial3D_t4q33")
material_overlay = SubResource("StandardMaterial3D_4jcw5")
cast_shadow = 0
gi_mode = 2
mesh = SubResource("PlaneMesh_q726u")
skeleton = NodePath("../..")
